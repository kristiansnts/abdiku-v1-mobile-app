{
  "info": {
    "name": "Mobile Attendance API",
    "description": "REST API for mobile attendance application with device management, clock-in/out with geofence validation, and attendance correction requests.",
    "version": "1.3.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "https://your-domain.com/api/v1",
      "description": "Base URL for the API"
    },
    {
      "key": "token",
      "value": "",
      "description": "Bearer token for authentication"
    },
    {
      "key": "device_id",
      "value": "postman-test-device-{{$randomUUID}}",
      "description": "Unique device identifier"
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{token}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "1. Authentication",
      "item": [
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.success && response.data.token) {",
                  "        pm.collectionVariables.set('token', response.data.token);",
                  "        console.log('Token saved:', response.data.token);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"password\",\n  \"device_id\": \"{{device_id}}\",\n  \"device_name\": \"Postman Test Device\",\n  \"device_model\": \"Postman\",\n  \"device_os\": \"API Test\",\n  \"app_version\": \"1.0.0\",\n  \"force_switch\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/login",
              "host": ["{{base_url}}"],
              "path": ["auth", "login"]
            },
            "description": "Authenticate user and register device. Implements one-user-one-device policy.\n\nRate Limit: 5 requests per minute per IP"
          },
          "response": []
        },
        {
          "name": "Login with Force Switch",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"password\",\n  \"device_id\": \"{{device_id}}\",\n  \"device_name\": \"Postman Test Device\",\n  \"device_model\": \"Postman\",\n  \"device_os\": \"API Test\",\n  \"app_version\": \"1.0.0\",\n  \"force_switch\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/login",
              "host": ["{{base_url}}"],
              "path": ["auth", "login"]
            },
            "description": "Force switch to this device (logs out other devices)"
          },
          "response": []
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/auth/me",
              "host": ["{{base_url}}"],
              "path": ["auth", "me"]
            },
            "description": "Get authenticated user information"
          },
          "response": []
        },
        {
          "name": "Get User Devices",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/auth/devices",
              "host": ["{{base_url}}"],
              "path": ["auth", "devices"]
            },
            "description": "List all registered devices for the user"
          },
          "response": []
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/auth/logout",
              "host": ["{{base_url}}"],
              "path": ["auth", "logout"]
            },
            "description": "Logout from current device"
          },
          "response": []
        },
        {
          "name": "Logout All Devices",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/auth/logout-all",
              "host": ["{{base_url}}"],
              "path": ["auth", "logout-all"]
            },
            "description": "Logout from all registered devices"
          },
          "response": []
        }
      ],
      "description": "Authentication endpoints for login, logout, and user information"
    },
    {
      "name": "2. Home & Activity",
      "item": [
        {
          "name": "Get Home Screen Data",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/home",
              "host": ["{{base_url}}"],
              "path": ["home"]
            },
            "description": "Aggregated data for mobile home screen. Returns today's attendance status, latest activity, and latest payslip in a single request."
          },
          "response": []
        },
        {
          "name": "Get Activity Feed",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/activities?limit=10",
              "host": ["{{base_url}}"],
              "path": ["activities"],
              "query": [
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Maximum items to return (default: 10)"
                }
              ]
            },
            "description": "Unified activity feed combining attendance records and requests, sorted by datetime."
          },
          "response": []
        },
        {
          "name": "Get Activity Feed by Month",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/activities?month=2026-02&limit=20",
              "host": ["{{base_url}}"],
              "path": ["activities"],
              "query": [
                {
                  "key": "month",
                  "value": "2026-02",
                  "description": "Filter by month (format: YYYY-MM)"
                },
                {
                  "key": "limit",
                  "value": "20",
                  "description": "Maximum items to return"
                }
              ]
            },
            "description": "Get activity feed filtered by specific month."
          },
          "response": []
        }
      ],
      "description": "Home screen aggregator and activity feed endpoints"
    },
    {
      "name": "3. Attendance",
      "item": [
        {
          "name": "Get Today's Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/attendance/status",
              "host": ["{{base_url}}"],
              "path": ["attendance", "status"]
            },
            "description": "Check current attendance status for today"
          },
          "response": []
        },
        {
          "name": "Clock In (JSON)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clock_in_at\": \"{{$isoTimestamp}}\",\n  \"evidence\": {\n    \"geolocation\": {\n      \"lat\": -6.2088,\n      \"lng\": 106.8456,\n      \"accuracy\": 10.5\n    },\n    \"device\": {\n      \"device_id\": \"{{device_id}}\",\n      \"model\": \"Postman Test Device\",\n      \"os\": \"API Test\",\n      \"app_version\": \"1.0.0\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/attendance/clock-in",
              "host": ["{{base_url}}"],
              "path": ["attendance", "clock-in"]
            },
            "description": "Submit clock-in with location and device evidence (JSON format)"
          },
          "response": []
        },
        {
          "name": "Clock In Outside Geofence",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clock_in_at\": \"{{$isoTimestamp}}\",\n  \"evidence\": {\n    \"geolocation\": {\n      \"lat\": -6.3000,\n      \"lng\": 106.9000,\n      \"accuracy\": 15.0\n    },\n    \"device\": {\n      \"device_id\": \"{{device_id}}\",\n      \"model\": \"Postman Test Device\",\n      \"os\": \"API Test\",\n      \"app_version\": \"1.0.0\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/attendance/clock-in",
              "host": ["{{base_url}}"],
              "path": ["attendance", "clock-in"]
            },
            "description": "Clock-in from outside geofence (should result in PENDING status)"
          },
          "response": []
        },
        {
          "name": "Clock In with Photo",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "clock_in_at",
                  "value": "{{$isoTimestamp}}",
                  "type": "text"
                },
                {
                  "key": "evidence[geolocation][lat]",
                  "value": "-6.2088",
                  "type": "text"
                },
                {
                  "key": "evidence[geolocation][lng]",
                  "value": "106.8456",
                  "type": "text"
                },
                {
                  "key": "evidence[geolocation][accuracy]",
                  "value": "10.5",
                  "type": "text"
                },
                {
                  "key": "evidence[device][device_id]",
                  "value": "{{device_id}}",
                  "type": "text"
                },
                {
                  "key": "evidence[device][model]",
                  "value": "Postman Test Device",
                  "type": "text"
                },
                {
                  "key": "evidence[device][os]",
                  "value": "API Test",
                  "type": "text"
                },
                {
                  "key": "evidence[device][app_version]",
                  "value": "1.0.0",
                  "type": "text"
                },
                {
                  "key": "evidence[photo]",
                  "type": "file",
                  "src": [],
                  "description": "Upload a photo file (JPG/PNG, max 5MB)"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/attendance/clock-in",
              "host": ["{{base_url}}"],
              "path": ["attendance", "clock-in"]
            },
            "description": "Submit clock-in with photo evidence (multipart/form-data)"
          },
          "response": []
        },
        {
          "name": "Clock Out",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clock_out_at\": \"{{$isoTimestamp}}\",\n  \"evidence\": {\n    \"geolocation\": {\n      \"lat\": -6.2088,\n      \"lng\": 106.8456,\n      \"accuracy\": 10.5\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/attendance/clock-out",
              "host": ["{{base_url}}"],
              "path": ["attendance", "clock-out"]
            },
            "description": "Submit clock-out"
          },
          "response": []
        },
        {
          "name": "Attendance History",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/attendance/history?per_page=10&page=1",
              "host": ["{{base_url}}"],
              "path": ["attendance", "history"],
              "query": [
                {
                  "key": "per_page",
                  "value": "10",
                  "description": "Items per page (max 100)"
                },
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                }
              ]
            },
            "description": "Get paginated attendance history (simplified response: id, date, clock_in, clock_out, status). Use 'Get Attendance Detail' for full data."
          },
          "response": []
        },
        {
          "name": "Get Attendance Detail",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/attendance/1",
              "host": ["{{base_url}}"],
              "path": ["attendance", "1"]
            },
            "description": "Get detailed attendance record including evidences, location, shift info, and approval requests."
          },
          "response": []
        }
      ],
      "description": "Attendance management endpoints for clock-in, clock-out, and history"
    },
    {
      "name": "4. Correction Requests",
      "item": [
        {
          "name": "List Correction Requests",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/attendance/requests?status=PENDING&per_page=10&page=1",
              "host": ["{{base_url}}"],
              "path": ["attendance", "requests"],
              "query": [
                {
                  "key": "status",
                  "value": "PENDING",
                  "description": "Filter by status: PENDING, APPROVED, REJECTED"
                },
                {
                  "key": "per_page",
                  "value": "10",
                  "description": "Items per page"
                },
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                }
              ]
            },
            "description": "Get user's correction requests with optional filtering"
          },
          "response": []
        },
        {
          "name": "Create Late Request",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"request_type\": \"LATE\",\n  \"attendance_raw_id\": 123,\n  \"requested_clock_in_at\": \"2026-02-02T08:00:00+07:00\",\n  \"reason\": \"Macet di jalan tol karena kecelakaan\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/attendance/requests",
              "host": ["{{base_url}}"],
              "path": ["attendance", "requests"]
            },
            "description": "Submit a late arrival correction request"
          },
          "response": []
        },
        {
          "name": "Create Correction Request",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"request_type\": \"CORRECTION\",\n  \"attendance_raw_id\": 123,\n  \"requested_clock_in_at\": \"2026-02-02T08:00:00+07:00\",\n  \"requested_clock_out_at\": \"2026-02-02T17:00:00+07:00\",\n  \"reason\": \"Lupa clock out, keluar kantor jam 17:00\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/attendance/requests",
              "host": ["{{base_url}}"],
              "path": ["attendance", "requests"]
            },
            "description": "Submit a time correction request"
          },
          "response": []
        },
        {
          "name": "Create Missing Attendance Request",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"request_type\": \"MISSING\",\n  \"date\": \"2026-02-01\",\n  \"requested_clock_in_at\": \"2026-02-01T08:00:00+07:00\",\n  \"requested_clock_out_at\": \"2026-02-01T17:00:00+07:00\",\n  \"reason\": \"Lupa clock in dan clock out karena ada meeting di luar kantor\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/attendance/requests",
              "host": ["{{base_url}}"],
              "path": ["attendance", "requests"]
            },
            "description": "Submit a missing attendance request"
          },
          "response": []
        },
        {
          "name": "Get Request Detail",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/attendance/requests/1",
              "host": ["{{base_url}}"],
              "path": ["attendance", "requests", "1"]
            },
            "description": "Get specific correction request details"
          },
          "response": []
        },
        {
          "name": "Cancel Request",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/attendance/requests/1",
              "host": ["{{base_url}}"],
              "path": ["attendance", "requests", "1"]
            },
            "description": "Cancel a pending correction request"
          },
          "response": []
        }
      ],
      "description": "Attendance correction request endpoints"
    },
    {
      "name": "5. Company",
      "item": [
        {
          "name": "Get Company Locations",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/company/locations",
              "host": ["{{base_url}}"],
              "path": ["company", "locations"]
            },
            "description": "Get list of company locations for geofence validation"
          },
          "response": []
        }
      ],
      "description": "Company-related endpoints"
    },
    {
      "name": "6. Employee",
      "item": [
        {
          "name": "Get Employee Detail",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/employee/detail",
              "host": ["{{base_url}}"],
              "path": ["employee", "detail"]
            },
            "description": "Get authenticated employee's profile information"
          },
          "response": []
        },
        {
          "name": "Get Employee Salary",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/employee/salary",
              "host": ["{{base_url}}"],
              "path": ["employee", "salary"]
            },
            "description": "Get authenticated employee's current salary/compensation details"
          },
          "response": []
        },
        {
          "name": "Get Employee Payslips",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/employee/payslips?page=1&per_page=10",
              "host": ["{{base_url}}"],
              "path": ["employee", "payslips"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                },
                {
                  "key": "per_page",
                  "value": "10",
                  "description": "Items per page (default: 10)"
                }
              ]
            },
            "description": "Get paginated list of employee's payslips (finalized payroll only)"
          },
          "response": []
        },
        {
          "name": "Get Payslip Detail",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/employee/payslips/1",
              "host": ["{{base_url}}"],
              "path": ["employee", "payslips", "1"]
            },
            "description": "Get specific payslip detail by ID"
          },
          "response": []
        }
      ],
      "description": "Employee profile and compensation endpoints"
    },
    {
      "name": "7. Payslips (Alias)",
      "item": [
        {
          "name": "List Payslips",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/payslips?page=1&per_page=10",
              "host": ["{{base_url}}"],
              "path": ["payslips"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                },
                {
                  "key": "per_page",
                  "value": "10",
                  "description": "Items per page (default: 10)"
                }
              ]
            },
            "description": "Alias endpoint for /employee/payslips. Get paginated list of employee's payslips."
          },
          "response": []
        },
        {
          "name": "Get Payslip Detail",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/payslips/1",
              "host": ["{{base_url}}"],
              "path": ["payslips", "1"]
            },
            "description": "Alias endpoint for /employee/payslips/{id}. Get specific payslip detail."
          },
          "response": []
        }
      ],
      "description": "Payslips alias endpoints for mobile navigation convenience"
    },
    {
      "name": "Test Scenarios",
      "item": [
        {
          "name": "Complete Flow - Clock In to Clock Out",
          "item": [
            {
              "name": "1. Login",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Login successful', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data.token).to.not.be.empty;",
                      "    pm.collectionVariables.set('token', response.data.token);",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "auth": {
                  "type": "noauth"
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"password\",\n  \"device_id\": \"{{device_id}}\",\n  \"device_name\": \"Postman Test Device\",\n  \"device_model\": \"Postman\",\n  \"device_os\": \"API Test\",\n  \"app_version\": \"1.0.0\",\n  \"force_switch\": true\n}"
                },
                "url": {
                  "raw": "{{base_url}}/auth/login",
                  "host": ["{{base_url}}"],
                  "path": ["auth", "login"]
                }
              },
              "response": []
            },
            {
              "name": "2. Check Status (Should be able to clock in)",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Can clock in', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data.can_clock_in).to.be.true;",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/attendance/status",
                  "host": ["{{base_url}}"],
                  "path": ["attendance", "status"]
                }
              },
              "response": []
            },
            {
              "name": "3. Clock In",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Clock in successful', function () {",
                      "    pm.response.to.have.status(201);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data.clock_in).to.not.be.empty;",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"clock_in_at\": \"{{$isoTimestamp}}\",\n  \"evidence\": {\n    \"geolocation\": {\n      \"lat\": -6.2088,\n      \"lng\": 106.8456,\n      \"accuracy\": 10.5\n    },\n    \"device\": {\n      \"device_id\": \"{{device_id}}\",\n      \"model\": \"Postman Test Device\",\n      \"os\": \"API Test\",\n      \"app_version\": \"1.0.0\"\n    }\n  }\n}"
                },
                "url": {
                  "raw": "{{base_url}}/attendance/clock-in",
                  "host": ["{{base_url}}"],
                  "path": ["attendance", "clock-in"]
                }
              },
              "response": []
            },
            {
              "name": "4. Check Status (Should be able to clock out)",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Can clock out', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data.can_clock_out).to.be.true;",
                      "    pm.expect(response.data.has_clocked_in).to.be.true;",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/attendance/status",
                  "host": ["{{base_url}}"],
                  "path": ["attendance", "status"]
                }
              },
              "response": []
            },
            {
              "name": "5. Clock Out",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Clock out successful', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data.clock_out).to.not.be.empty;",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"clock_out_at\": \"{{$isoTimestamp}}\",\n  \"evidence\": {\n    \"geolocation\": {\n      \"lat\": -6.2088,\n      \"lng\": 106.8456,\n      \"accuracy\": 10.5\n    }\n  }\n}"
                },
                "url": {
                  "raw": "{{base_url}}/attendance/clock-out",
                  "host": ["{{base_url}}"],
                  "path": ["attendance", "clock-out"]
                }
              },
              "response": []
            },
            {
              "name": "6. Check Final Status",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Day completed', function () {",
                      "    pm.response.to.have.status(200);",
                      "    const response = pm.response.json();",
                      "    pm.expect(response.success).to.be.true;",
                      "    pm.expect(response.data.has_clocked_in).to.be.true;",
                      "    pm.expect(response.data.has_clocked_out).to.be.true;",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/attendance/status",
                  "host": ["{{base_url}}"],
                  "path": ["attendance", "status"]
                }
              },
              "response": []
            }
          ],
          "description": "Complete flow from login to clock out"
        },
        {
          "name": "Error Scenarios",
          "item": [
            {
              "name": "Invalid Login Credentials",
              "request": {
                "auth": {
                  "type": "noauth"
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"invalid@example.com\",\n  \"password\": \"wrongpassword\",\n  \"device_id\": \"{{device_id}}\",\n  \"device_name\": \"Test Device\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/auth/login",
                  "host": ["{{base_url}}"],
                  "path": ["auth", "login"]
                },
                "description": "Test login with invalid credentials (should return 401)"
              },
              "response": []
            },
            {
              "name": "Unauthorized Request",
              "request": {
                "auth": {
                  "type": "noauth"
                },
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/attendance/status",
                  "host": ["{{base_url}}"],
                  "path": ["attendance", "status"]
                },
                "description": "Test request without authentication token (should return 401)"
              },
              "response": []
            },
            {
              "name": "Clock Out Without Clock In",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"clock_out_at\": \"{{$isoTimestamp}}\",\n  \"evidence\": {\n    \"geolocation\": {\n      \"lat\": -6.2088,\n      \"lng\": 106.8456,\n      \"accuracy\": 10.5\n    }\n  }\n}"
                },
                "url": {
                  "raw": "{{base_url}}/attendance/clock-out",
                  "host": ["{{base_url}}"],
                  "path": ["attendance", "clock-out"]
                },
                "description": "Test clock out without clock in (should return 422)"
              },
              "response": []
            }
          ],
          "description": "Test error scenarios and validation"
        }
      ],
      "description": "Complete test scenarios and workflows"
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Auto-generate device_id if not set",
          "if (!pm.collectionVariables.get('device_id')) {",
          "    pm.collectionVariables.set('device_id', 'postman-test-' + Math.random().toString(36).substr(2, 9));",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global test to check response format",
          "pm.test('Response has correct format', function () {",
          "    const response = pm.response.json();",
          "    pm.expect(response).to.have.property('success');",
          "    ",
          "    if (response.success) {",
          "        pm.expect(response).to.have.property('data');",
          "    } else {",
          "        pm.expect(response).to.have.property('error');",
          "        pm.expect(response.error).to.have.property('code');",
          "        pm.expect(response.error).to.have.property('message');",
          "    }",
          "});"
        ]
      }
    }
  ]
}